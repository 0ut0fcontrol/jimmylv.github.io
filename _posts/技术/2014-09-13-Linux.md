---
layout: post
title: Linux技术小贴士
category: 技术
tags: Linux
keywords: 
description: 
---

管理实验室服务器的大神师兄[苏宇]()毕业了，他将管理服务器的工作交给了我——对Linux和服务器管理毫无经验的小菜一枚。前几天师弟[段云鹏](https://yunpeng.blog.ustc.edu.cn)的一些机缘巧合的误操作导致服务器核崩溃，我却手足无措，请来[刘惠民](http://painterliu.com)童鞋帮着忙活了两晚，也没能复原系统。最后还是让苏神师兄回了学校一趟才解决问题。由此想了两件事：既然答应了负责管理服务器，就不能再以“浪费精力”、“没兴趣”等借口拒绝学习相关技术；人的时间与精力真的很有限，下一次给承诺之前，先想想自己是否花得起这份时间与精力。

- [《鸟哥的Linux私房菜——基础学习篇》](http://book.douban.com/subject/4889838/)
- [《鸟哥的Linux私房菜——服务器架设篇》](http://book.douban.com/subject/2338464/)

本文分为两部分，第一部分记录系统学习以上两本书的笔记。第二部分是实际中遇到的问题及解决方案。
本文小标题众多，可通过页面右边的“目录显示”按钮进行内容导航。




##学习笔记
###查看内核版本
```
uname -r
```
稳定版本的偶数版，如2.6.x，适合于商业与家用环境使用；开发中版本，如2.5.x，适合开发特殊功能的环境。

###登陆

Mac：（若以root身份登陆，将username改为root）

```
ssh username@IPaddress
```
Linux：(若以root身份登陆，将username改为-）Linux默认root的提示符为#,而一般身份用户的提示符为$。

```
su username
```

###注销Linux
注销Linux并不意味着关机，只是用户离开系统。

```
exit
```

###基础命令的操作

```
command [-options] parameter1 parameter2 ···
```

```
echo $LANG   #显示目前支持的语言
LANG=en_US   #将语言改为英文系
date         #显示日期与实践
cal 10 2014  #显示日历
bc           #计算器
quit         #退出
```

###重要的热键
`[tab]`：连按两次，具有“命令补全”和“文件补齐”的作用。
`[control]+c`：中断目前程序。
`[control]+d`：键盘输入结束；直接离开文字界面（相当于``exit`）。

###在线求助 man page

```
man command  #command是要查询的命令名称
```

进入man命令后，可按`空格`往下翻页，按`q`键离开。
在man page中，可以在任何时候输入`/keyword`来查询关键字，比如/date.

###正确的关机方法
```
who         #查看目前有谁在线
netstat -a  #查看网络的联机状态
ps -aux     #查看后台执行的程序
```

####数据同步写入磁盘
为了防止不正常关机导致的内存数据没有来得及写入磁盘，在文字界面输入

```
sync 
```

####惯用的关机命令

```
shutdown -h now     #立刻关机
shutdown -h 20:25   #晚上8点25分关机
shutdown -h +10     #过十分钟后关机
shutdown -r now     #立刻重启
shutdown -r +30 ‘The system will be reboot’    #再过30分钟关机，并显示后面的消息给所有在线用户
shutdown -k now ‘The system will be reboot’    #仅发出警告，系统并不会真正关机
```

####重启、关机：reboot，halt，poweroff
务必用man去查询一下。







##实际问题
###建立网络映射
- Mac：`Finder`->`前往`->`连接服务器`->输入`smb://IPaddress/samba`->`连接`
- Linux：`位置`->`连接服务器`->“服务类型”选择`自定义位置`->输入`smb://IPaddress/samba`->`连接`

###ssh登陆失败
以root身份远程登陆服务器，密码正确，却显示如下警告：

```
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@    WARNING: REMOTE HOST IDENTIFICATION HAS CHANGED!     @
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
IT IS POSSIBLE THAT SOMEONE IS DOING SOMETHING NASTY!
Someone could be eavesdropping on you right now (man-in-the-middle attack)!
It is also possible that a host key has just been changed.
The fingerprint for the RSA key sent by the remote host is
3a:17:4b:6e:62:e6:94:df:09:78:99:90:51:68:18:62.
Please contact your system administrator.
Add correct host key in /Users/AnyaLin/.ssh/known_hosts to get rid of this message.
Offending RSA key in /Users/AnyaLin/.ssh/known_hosts:4
RSA host key for 222.195.93.129 has changed and you have requested strict checking.
Host key verification failed.
```

解决方法：

```
vi ~/.ssh/known_hosts     #选中最后一条登陆记录，双击`d`删除，按“：”进入末行编辑模式，输入“x”，回车
ssh root@222.195.93.129   #再次登陆
The authenticity of host '222.195.93.129 (222.195.93.129)' can't be established.
RSA key fingerprint is 3a:17:4b:6e:62:e6:94:df:09:78:99:90:51:68:18:62.
Are you sure you want to continue connecting (yes/no)?    #输入yes
```


